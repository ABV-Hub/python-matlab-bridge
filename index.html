<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Python-matlab-bridge : A simple Python =&gt; MATLAB(R) interface and a matlab_magic for ipython" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Python-matlab-bridge</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/arokem/python-matlab-bridge">View on GitHub</a>

          <h1 id="project_title">Python-matlab-bridge</h1>
          <h2 id="project_tagline">A simple Python =&gt; MATLAB(R) interface and a matlab_magic for ipython</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/arokem/python-matlab-bridge/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/arokem/python-matlab-bridge/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="python-matlabr-bridge-and-ipython-matlab_magic" class="anchor" href="#python-matlabr-bridge-and-ipython-matlab_magic"><span class="octicon octicon-link"></span></a>Python-MATLAB(R) Bridge and ipython matlab_magic</h1>

<p>A python interface to call out to <a href="http://mathworks.com">Matlab(R)</a>. Original
implementation by <a href="http://www.maxjaderberg.com/">Max Jaderberg</a>.</p>

<p>This implementation also includes an <a href="http://ipython.org">IPython</a> <code>matlab_magic</code>
extension, which provides a simple interface for weaving python and
Matlab code together (requires ipython &gt; 0.13).  </p>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Pymatbridge communicates with Matlab using zeromq. So before installing
pymatbridge you must have <a href="http://zeromq.org/intro:get-the-software">zmq</a>
library and <a href="http://zeromq.org/bindings:python">pyzmq</a> installed on your
machine. If you intend to use the Matlab magic extension, you'll also need
<a href="http://ipython.org/install.html">IPython</a>.  To make pymatbridge work properly,
please follow the following steps.</p>

<h3>
<a name="install-zmq-library" class="anchor" href="#install-zmq-library"><span class="octicon octicon-link"></span></a>Install zmq library</h3>

<p>Please refer to the <a href="http://zeromq.org/intro:get-the-software">official guide</a> on how to
build and install zmq. After zmq is installed, make sure you can find the location where
libzmq is installed. The library extension name and default location on different systems
are listed below.</p>

<table>
<thead><tr>
<th>Platform</th>
<th>library name</th>
<th>Default locations</th>
</tr></thead>
<tbody>
<tr>
<td>MacOS</td>
<td>libzmq.dylib</td>
<td>/usr/lib or /usr/local/lib</td>
</tr>
<tr>
<td>Linux</td>
<td>libzmq.so.3</td>
<td>/usr/lib or /usr/local/lib</td>
</tr>
<tr>
<td>Windows</td>
<td>libzmq.dll</td>
<td>C:\Program Files\ZeroMQ 3.2.4\bin</td>
</tr>
</tbody>
</table><p>If you specified a prefix when installing zmq, the library file should be located at the
same prefix location.</p>

<p>After the library file is located, you need to add it to dynamic loader path on your 
machine. On MacOS, you can do this by adding the following line to your .bash_profile:</p>

<pre><code>export DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:&lt;Path to your zmq lib directory&gt;
</code></pre>

<p>On Linux, add the following line to your .bash_profile:</p>

<pre><code>export LD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:&lt;Path to your zmq lib directory&gt;
</code></pre>

<p>On Windows, add the install location of libzmq.dll to the PATH environment variable.
On Windows 7+, typing "environment variables" into the start menu will bring up the
apporpriate Control Panel links.</p>

<h3>
<a name="install-pyzmq" class="anchor" href="#install-pyzmq"><span class="octicon octicon-link"></span></a>Install pyzmq</h3>

<p>After step 1 is finished, please grab the latest version of 
<a href="http://zeromq.org/bindings:python">pyzmq</a> and follow the instructions on the official 
page. Note that pymatbridge is developed with pyzmq 14.0.0 and older versions might not 
be supported. If you have an old version of pyzmq, please update it. </p>

<h3>
<a name="install-pymatbridge" class="anchor" href="#install-pymatbridge"><span class="octicon octicon-link"></span></a>Install pymatbridge</h3>

<p>After the steps above are done, you can install pymatbridge. Download the zip file of the 
latest release. Unzip it somewhere on your machine and then issue:</p>

<pre><code>python setup.py install
</code></pre>

<p>This should make the python-matlab-bridge import-able.</p>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>To use the pymatbridge you need to connect your python interperter to a Matlab
session. This is done in the following manner:</p>

<pre><code>from pymatbridge import Matlab
mlab = Matlab()
</code></pre>

<p>This creates a matlab session class instance, into which you will be able to
inject code and variables, and query for results. By default, when you use
<code>start</code>, this will open whatever gets called when you type <code>matlab</code>
in your Terminal, but you can also specify the location of your Matlab
application when initialzing your matlab session class:  </p>

<pre><code>mlab = Matlab(matlab='/Applications/MATLAB_R2011a.app/bin/matlab')
</code></pre>

<p>You can then start the Matlab server, which will kick off your matlab session,
and create the connection between your Python interperter and this session:</p>

<pre><code>mlab.start()
</code></pre>

<p>which will return True once connected.</p>

<pre><code>results = mlab.run_code('a=1;')
</code></pre>

<p>Should now run that line of code and return a <code>results</code> dict into your Python
namespace. The <code>results</code> dict contains the following fields:</p>

<pre><code>{u'content': {u'code': u'a=1',
 u'datadir': u'/private/tmp/MatlabData/',
 u'figures': [],
 u'stdout': u'\na =\n\n     1\n\n'},
 u'success': u'true'}
</code></pre>

<p>In this case, the variable <code>a</code> is available on the Python side, by using
the <code>get_variable</code> method:</p>

<pre><code>mlab.get_variable('a')
</code></pre>

<p>You can  run any MATLAB functions contained within a .m file of the
same name. For example, to call the function jk in jk.m:</p>

<pre><code>%% MATLAB
function lol = jk(args)
    arg1 = args.arg1;
    arg2 = args.arg2;
    lol = arg1 + arg2;
end
</code></pre>

<p>you would call:</p>

<pre><code>res = mlab.run_func('path/to/jk.m', {'arg1': 3, 'arg2': 5})
print res['result']
</code></pre>

<p>This would print <code>8</code>.</p>

<p>You can shut down the MATLAB server by calling:</p>

<pre><code>mlab.stop()
</code></pre>

<p>Tip: you can execute MATLAB code at the beginning of each of your matlab
sessions by adding code to the <code>~/startup.m</code> file.</p>

<h3>
<a name="matlab-magic" class="anchor" href="#matlab-magic"><span class="octicon octicon-link"></span></a>Matlab magic:</h3>

<p>The Matlab magic allows you to use pymatbridge in the context of the IPython
notebook format.</p>

<pre><code>%load_ext pymatbridge
</code></pre>

<p>These lines will automatically start the matlab session for you. Then, you can
simply decorate a line/cell with the '%matlab' or '%%matlab' decorator and
write matlab code:</p>

<pre><code>%%matlab 
a = linspace(0.01,6*pi,100);
plot(sin(a))
grid on
hold on
plot(cos(a),'r')
</code></pre>

<p>More examples are provided in the <code>examples</code> directory</p>

<h3>
<a name="warnings" class="anchor" href="#warnings"><span class="octicon octicon-link"></span></a>Warnings</h3>

<p>Python communicates with Matlab via an ad-hoc zmq messenger. This is inherently
insecure, as the Matlab instance may be directed to perform arbitrary system
calls. There is no sandboxing of any kind. Use this code at your own risk.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Python-matlab-bridge maintained by <a href="https://github.com/arokem">arokem</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-40132410-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
